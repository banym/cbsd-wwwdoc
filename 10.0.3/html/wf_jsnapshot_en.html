<b>Commands</b>:<br>
<pre>
% cbsd jsnapshot
</pre>

<b>Description</b>:
<br><br>
Show the list, create, delete and rollback snapshots for a jail when node startend on ZFS filesystem and <b>zfsfeat</b> in file <b>$workdir/nc.inventory</b> set to 1.
<br>
Through <b>mode</b> parameter you can you specify that it is necessary to make. Possible options:
<br><br>
<b>list</b> - show snapshot liss for current jail
<br>
<b>create</b> - create snapshot for jail
<br>
<b>destroy</b> - delete snapshot for jail
<br>
<b>destroyall</b> - remove all snapshots for jail
<br>
<b>clone</b> - clone snapshot into new jail
<br>
<b>rollback</b> - rollback jail to current snapshot state
<br><br>
Additional arguments:
<br><br>
<b>jname</b> - for what jail action is made
<br>
<b>snapname</b> - snapshot name
<br>
<br><br>
It should be borne in mind that snapshots have a tree structure. It mean, if you created a series of snapshots : <b>1,2,3,4</b> and fell back to a snapshot <b>2</b>, then snapshots <b>3</b> and </b>4</b> will be lost, as against
by the time of the snapshot <b>2</b> they were created in the future.
<br><br>
Also arbitrary and unique name for a snapshot when you create, you can specify snapname=gettimeofday. In this case, the system automatically fills in as the name of the timestamp from the current time.
<br><br>
When listing snapshots, you can use modifiers to clarify to what you want to see jail snapshots, and customize output field through argument <b>display=</b>
<br> <br>
<b>Example</b>:
<br><br>
create snapshot named <i>gromozeka</i> for <b>jail1</b> jail:
<br>
<pre>
% cbsd jsnapshot mode=create jname=jail1 snapname=gromozeka
</pre>
create snapshot named <i>zelepuka</i> for <b>jail1</b> jail:
<pre>
% cbsd jsnapshot mode=create jname=jail1 snapname=zelepuka
</pre>
<br>
Run jail1 and stop after some modification:
<pre>
% cbsd jstart jail1
..
% cbsd jexec jname=jail1 cp /bin/date /root
% cbsd jexec jname=jail1 file -s /root/date
/root/date: ELF 64-bit LSB executable, x86-64, version 1 (FreeBSD), dynamically linked (uses shared libs), for FreeBSD 9.0 (900506), stripped
% cbsd jstop jail1
..
</pre>
Rollback jail1 to snapshot zelepuka state:
<pre>
% cbsd jsnapshot mode=rollback snapname=zelepuka jname=jail1
% cbsd jstart jail1
...
% cbsd jexec jname=jail1 file -s /root/date
/root/date: ERROR: cannot open `/root/date' (No such file or directory)
</pre>

<br><center>
<img src="/html/img/jsnapshot1.png"></img>
<br><br>
<img src="/html/img/jsnapshot2.png"></img>
<br><br>
</center>
</p>
