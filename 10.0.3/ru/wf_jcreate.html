<!--#set var="uri" value="$DOCUMENT_URI" -->
<!--# include file="/ru/_start.html" -->
	<h1><span>Создание jail через dialog меню</span></h1>
	
	<h2><a name="commands">Команды</a></h2>
	<div class="block">
		<pre class="brush:bash;ruler=true;">
		% cbsd jconstruct-tui
		</pre>
		<pre class="brush:bash;ruler=true;">
		% cbsd jcreate jconf=/path/to/conf.jconf
		</pre>
	</div>
	
	<h2><a name="descr">Описание</a></h2>
	<div class="block">
		<p>Клетка создается по заранее сформированному конфигурационному файлу через <b>cbsd jcreate jconf=path_to_cfg</b>.
		Для формирования конфигурации, можно воспользоваться <b>cbsd jconstruct</b> (в режиме диалога вопрос-ответ),
		либо через dialog(1) интерфейс <b>cbsd jconstruct-tui</b>, либо через WEB интерфейс.
		При корректно настроеном <a href="https://wiki.freebsd.org/pkgng" target="_blank"><b>pkg.conf</b></a> и рабочем репозитории, есть возможность 
		предустановить в клетку готовые пекеджи. В целях безопасности, рекомендуется использовать официальный <b>pkg</b> репозиторий FreeBSD или 
		<a href="/ru/articles/cbsd_cpr.html" target="_blank">создавать свои собственные</a> версии сборок ПО.
		</p>
		<p>Примечание: если репозиторий недоступен, пункт <b>pkglist</b> при <i>cbsd jconstruct-tui</i> диалога выбора пекеджей не выведет.</p>
		<p>Примечание: мульти-репозитории и возможность их выбора при создании клетки пока не реализовано, используется репозиторий из основного pkg.conf.</p>
	</div>
	<div class="warning">
		<p>Внимание! Поскольку список и выбор пекеджей формируется по pkg.conf мастер машины, имейте ввиду, что наполнение выбранных пекеджей по списку сработает лишь в том случае, если архитектура и версия клетки совпадает с нодой.</p>
	</div>
	<div class="block">
		<p>Для создания через DIALOG:</p>
		<pre class="brush:bash;ruler=true;">
		% cbsd jconstruct-tui
		</pre>
		<p>Если <i>jconstruct-tui</i> отработала корректно, по окончанию будет задан вопрос о создании клетки. В случае
		положительно ответа, <b>jcreate</b> будет выполнен на новую конфигурацию автоматически. В противном случае,
		скрипт выведет путь к конфигурационному файлу (в $workdir/tmp), по которой можно создать клетку.</p>
	</div>
	<!--# include file="/ru/changeroot.html" -->
	<div class="block">
		<p><b>Пример</b> (заполнение jname, fqdn, ips полей + GO):</p>
		<pre class="brush:bash;ruler=true;">
		% cbsd jconstruct-tui
		</pre>
		<p class="text-center"><img src="/img/jcreate1.png" /></p>
		<p>Если репозиторий сконфигурирован корректно, можно выбрать пекеджи на установку. Используйте первый символ названия порта для
		более быстрого поиска и пробел для маркировки:</p>
		<p class="text-center"><img src="/img/jcreate2.png" /></p>
		<p>Обязательное поле для заполнения: короткое (одним словом) имя клетки. Это имя будет использоваться для идентификации jail:</p>
		<p class="text-center"><img src="/img/jcreate3.png" /></p>
		<p>Обязательное поле для заполнения: полное (с доменом) имя клетки. Это имя будет использовано как hostname клетки:</p>
		<p class="text-center"><img src="/img/jcreate4.png" /></p>
		<p>Обязательное поле для заполнения: IP адрес клетки. Может иметь сетевой префикс через запись вида IP/prefix.</p>
		<p>Для установки более одного IP адреса, воспользуйтесь редактированием файла <b>rc.conf</b> клетки, описанным в <a href="/10.0.3/ru/wf_jconfig_ssi.html" target="_blank">конфигурации клетки</a></p>
		<p class="text-center"><img src="/img/jcreate5.png" /></p>
		<p>При вызове пункта <b>GO</b>, система предложит создать клетку немедленно, автоматически запустив <b>cbsd jcreate jconf=..</b>. В противном случае, будет выведен путь к сохраненной конфигурации для запуска команды <b>cbsd jcreate</b> вручную:</p>
		<p class="text-center"><img src="/img/jcreate6.png" /></p>
	</div>
<!--# include file="/ru/_end.html" -->