<strong>Команды</strong>:<br>
<pre>
% cbsd ddns
</pre>

<strong>Описание</strong>:
<br><br>
Выполняет регистрацию записей DNS в соответствующих зонах, относящихся к клетке. Для ее корректной работы необходим корректно настроенный DNS сервер и ключ для обновления зоны.
Поскольку заинтересованных в обновлении зон  при запуске и остановке клетки может быть несколько, их можно перечислить в <strong>rc.conf</strong> соответствующей клетки.

Если параметр <em>ddns_zone_list</em> не пустой, при выполнении <strong>jstart</strong> и <strong>jstop</strong>, команды
<pre>
cbsd ddns mode=add jname=xxx
</pre>
и
<pre>
cbsd ddns mode=delete jname=xxx
</pre>

выполняются автоматически.
Параметр <em>mode</em> означает выполняемое действие с записью - может быть <em>add</em> или <em>delete</em>. 

Минимальная конфигурация в rc.conf клетки:
<pre>
ddns_zone_list="";
</pre>

должна иметь список имен конфигураций для зон. Одна запись для одной зоны. В имени не должно быть точек.

<pre>
ddns_key_<strong>name_of_zone</strong>="";
</pre>

Параметр содержит путь к файлу приватного ключа зоны <em>name_of_zone</em>, перечисленной в <strong>ddns_zone_list</strong>.

<pre>
ddns_zones_<strong>name_of_zone</strong>="";
</pre>

содержит список тех записей, которые должны быть обновлены в соответствующей зоне.
<br><br>
<strong>Пример:</strong> конфигурация для обновления двух зон: my.domain и bsdstore.ru и добавлении или удалении
IP адресов клетки под записями test1.my.domain + test2.my.domain и relay.bsdstore.ru:
<br>
<pre>
ddns_zone_list="my_domain bsdstore";
ddns_key_my_domain="/usr/jails/etc/zonekeys/Kmy.domain.+157+52142.private";
ddns_key_bsdstore="/usr/jails/etc/zonekeys/Kbsdstore.+157+52142.private";
ddns_zones_my_domain="jail1.my.domain jail1.my.domain";
ddns_zones_bsdstore="relay.bsdstore.ru";
</pre>

Конфигурация для DNS сервера (named):
<pre>
key bsdstore.ru. {algorithm "HMAC-MD5";secret "YrVW9yP6gNMA7VbcU/r2mSIwYnFj/XkCDd6QuqOHE26/ipnrPy+eXrKrUyaFhB2XWNdVLUX7QCUkfhg4zN5YiA==";};
zone "bsdstore.ru" {type master;file "/etc/namedb/dynamic/bsdstore.ru";allow-update {key bsdstore.ru; };};
</pre>

ключи сгеренированы через:
<pre>
dnssec-keygen -b 512 -a HMAC-MD5 -v 2 -n HOST bsdstore.ru.
</pre>
