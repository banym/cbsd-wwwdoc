<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<HTML>
<HEAD>
  <META http-equiv="content-type" content="text/html; charset=UTF-8">
  <META name="Description" content="CBSD Store">
  <META name="Keywords" content="CBSD, BSDStore">

  <LINK rel="shortcut icon" href="favicon.ico">

  <title>CBSD - FreeBSD jails management tools</title>
</HEAD>
<!--# include file="/html/cbsdmenu_ru.html" -->
<FONT face="verdana,arial,helvetica" size="+1">О проекте</font>
<FONT face="verdana,arial,helvetica" size="-1">
<br><br>
<b>CBSD</b> - это обертка из <b>sh</b>-скриптов (преимущественно) вокруг подсистемы <a href="http://www.freebsd.org/cgi/man.cgi?query=jail&apropos=0&sektion=0&manpath=FreeBSD+9.1-RELEASE&arch=default&format=html">jail(8)</a> операционной системы 
<a href="http://www.freebsd.org">FreeBSD</a>. Какого-либо нового функционала в ОС на данном этапе не внесено - все, что могут делать скрипты <b>cbsd</b>, можно сделать командой (командами, десятками, сотнями команд) в CLI через соответствующие утилиты. 
Проект делается как для облегчения собственных нужд по администрированию клеток и серверов, так и 'just for fun'.<br>
<br>
Из списка собственных нужд можно отметить следующие действа:
<br><br>
<li> быстрое развертывание jail с нуля
<li> эспорт и импорт jail в файл
<li> клонирование и/или миграция jail (в т.ч. на удаленную машину)
<li> снапшоты jail 
<li> подсчет трафика и потребляемых ресурсов на один jail
<li> управление ресурсами jail (приоретизация(re-nice), RACCT/RCTL, файловые квоты)
<li> репликация jail на удаленные машины
<li> дистрибьюция "типовых" jail, клеток с определенным набором софта и сервисами
<li> WEB интерфейс и централизованное управление фермой jail-ов
<li> ...
<br><br>
<FONT size="+1">Пара ПОЧЕМУ...
<FONT size="-1">
<br><br>Почему FreeBSD, почему Jail, почему sh, почему ...":
<br>
<br>FreeBSD/jail выбраны для проекта по ряду причин, наиболее важные из которых:
<br>
<br><li>отсутствие у Jail накладных ресурсов на виртуализацию. Без VIMAGE, код jail до сих пор имеет в ядре крайне мало своих if/case конструкций;
<br><li>следование совету безопасников - "разделяй и властвуй". Желательно каждый сервис или группу сервисов изолировать от других;
<br><li>Системным инженерам зачастую приходится делать массу однотипных инсталляций - AMP, MTA, KDE4, .. в какой-то момент захотелось иметь
заранее сформированное и настроенное окружение. Клеточный подход позволяет ввести сервер в экслуатацию мгновенно, после установки FreeBSD с нуля - 
для того, чтобы развернуть почтовый сервер или запустить KDE4, никаких настроек в мастер хосте делать не нужно - достаточно
скачать заранее сформированное окружение по сети. Возможность создавать Desktop клетки имеют свою особую прелесть в виде остутствии в необходимости 
создавать 1024-ый по счету дистрибутив, отличающийся от других только картинкой рабочего стола и набором ПО;
<br><li>Удобство бекапа и раскатывания клетки на свежеустановленную ноду;
<br><li>Построение собственных локальный репозиториев/библиотек клеток с кастомизированными опциями через <a href="http://www.freebsd.org/doc/en_US.ISO8859-1/books/handbook/ports.html">FreeBSD ports</a>;
<br><li>При вышеупомянутом плюсе - отсутствии оверхеда на виртуализацию,  с соответствующим мониторингом, можно формировать максимально эффективные системы.
Например, имеются клетки с NoSQL (Redis, Memcached) - плотная работа с памятью, клетка с MySQL - плотная работа с CPU, клетка с WEB-скриптами (CPU&сеть),
клетка с Samba (нагрузка на сеть и диски).. Каждую физическую ноду можно укомплектовать такими Jail, с которыми не будет простаивать ни один из аппаратных
компонент сервера и при этом, клетки не будут друг другу мешать.
<br><li>..
<br><br>
Большая часть кода написана на <b>sh</b> по той причине, что подобные задачи не требуют большой математической логики - скрипты в основном повторяют ввод
команд системного администратора в консоле, т.е., работают с внешними утилитами, такими как: zfs, zpool, sudo, pkg, rsync, соответственно, необходимость применять языки
программирования по большей части отстутствует. Часть узких мест, а также некоторый функционал (logtail, репликация, демон следящий за нодами и тп) написаны на C (в планах
переписывать узкие места на Си и дальше.
<br><br>
Список 3rd-party софта, которое используют в работе cbsd: <b>rsync</b>,<b>sudo</b>,<b>libssh2</b>,<b>sqlite3</b>
<br><br>
<FONT size="+1">Особенности...
<FONT size="-1"><br><br>
<li> готовый репозиторий для ядер и миров, что делает шаги buildworld/installworld необязательными.
<li> Если шаги buildworld/installworld предпринимаются, поддерживается src.conf для кастомизации мира
<li> base каталог может располагаться на MD/RAM/TMPFS диске, что может быть полезно при большом кол-ве jail-ов с RO-подмонтированной базой
<li> поддержка ZFS файловой системы, ZFS квот, ZFS снапшотов
<li> GUI конфигуратор клеток (DIALOG/WEB)
<li> поддержка VIMAGE
<li> подсчет трафика в jail
<li> импортирование/экспортирование клеток
<li> описания клеток
<li> холодная миграция клетки с ноды на ноду
<li> управление очередностью запуска jail и их приоритетом
<li> поддержка RACCT/RCTL
<li> репозиторий с готовыми template-клетками
<li> репликация клетки
<li> возможность создавать свои собственные сценарии для создания клеток
<li> конвертирование jail в PXE/ISO/Memstick-имидж
<li> ...
<br><br>
<FONT size="+1">Цели проекта
<FONT size="-1"><br><br>
<li> автоматизация типовых операций
<li> удобный менеджмент, мониторинг и контроль клеток
<li> создание платформы для приложений по-требованию. 
<li> библиотека образов
<li> и не только...
</font><blockquote>
<center><FONT face="verdana,arial,helvetica"><b>
</b></font></center>
</BODY>
</HTML>
