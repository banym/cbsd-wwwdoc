<b>Команды</b>:<br>
<pre>
% cbsd jconfig jname=jail1
</pre>

<b>Описание</b>:
Конфигурирование параметров jail
<br>
<p>Каждая клетка имеет свой собственный rc.conf файл в каталоге <i><b>$workdir/jails-rcconf/</b></i>, собственный файл fstab для списка монтируемых файловых систем в каталоге
<i><b>$workdir/jails-fstab/</b></i> и собственный каталог для хранения статистики, описания клетки, конфигураторов и прочих вспомогательных файлов в каталоге <i><b>$workdir/jails-system/</b></i>
</p>
В TUI-диалоге могут быть вынесены не все возможные параметры конфигураций клеток, в этом случае их можно корректировать в соответствующих файлах в любом текстовом редакторе при погашенной клетке.
<br>
<h3>IP адреса клеток</h3>
IP адреса, которые привязываются к клетке, указывается в <i><b>$workdir/jails-rcconf/</b>rc.conf_name</i> файле в параметре <b>ip4_addr</b>.
В качестве IP могут выступать как IPv4, так и IPv6 адреса. При запуске и останове клетки, работа с IP может проходить в двух режимах -
автоматическое создание на-лету IP адресов для клетки в момент запуска + автоматическое удаление IP с интерфейса при останове, либо
использование ранее установленных IP адресов. 
<p>
Если клетке назначаются более одного адреса, они должны быть указаны через запятую без пробелов. IP могут содержать префикс сети, указанный
через IP/<b>prefix</b>. По-умолчанию, alias создается с префиксом /32, что может не подходить, если jail использует подсеть отдельную от сети сервера - в
этом случае, корректный <b>/prefix</b> необходим.
<p>
Параметр, управляющий этим поведением, находится в <i><b>$workdir/jails-rcconf/</b>rc.conf_name</i> файле
и называется <b>interface</b>. Если его нет в <b>rc.conf</b>-файле или его значение равно 0, при jstart и jstop не будут вызываться
ifconfig alias и ifconfig -alias соответственно. Если его значение равно 1, перед запуском клетки будет вызвана команда 
<pre>
ifconfig <i>alias</i> <b>interface</b> <b>ips</b>,
</pre>
а
при остановке - 
<pre>
ifconfig <b>inteface</b> <b>ips</b> <i>-alias</i>
</pre>

Будьте аккуратны с этим параметром, если в наличие есть только 1 IP сервера, который используется и основной системой и этот же IP назначается клетке:
при остановке jail, ip адрес сервера будет удален увтоматически, что сделает сервер недоступным. В этом случае нужно использовать в rc.conf:

interface=0

или просто удалить параметр interface из rc.conf.

Пример куска конфигурации для создания трех IP адресов при старте клетки:
<pre>
..
interface=1
ip4_addr="176.9.147.18/29,2a01:4f8:160:3002::1/64,192.168.0.2/24"
..
</pre>

<h3>Монтирование файловых систем в jail</h3>

Каждый jail имеет свой fstab файл, в котором перечисляются файловые системы, монтирующиеся в jail при запуске клетки. Этот файл располагается в файле
<i><b>$workdir/jails-fstab/</b>fstab.name</i> и совпадает по синтаксису с форматом системного файла <b>/etc/fstab</b> с тем исключением, что в качестве точки монтирования, указывается
путь относительно корня JAIL, а не мастер системы. Например, если вы хотите в jail1, который находится в каталоге
<br>
/usr/jails/jails/jail1 
<br>
относительно мастер-хоста смонтировать в каталог /tmp файловую систему tmpfs (те, фактически, в /usr/jails/jails/jail1/tmp), то запись в 
<i><b>$workdir/jails-fstab/</b>fstab.jail1</i> должна выглядить так:
<pre>
..
tmpfs /tmp tmpfs rw 0 0
..
</pre>


<br>
//продолжение следует