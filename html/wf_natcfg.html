<b>Команды</b>:<br>
<pre>
% cbsd natcfg
% cbsd naton
% cbsd natoff
</pre>

<b>Описание</b>:
<p>Не всегда клеткам требуются внешние IP, либо, по причинам безопасности, ряд сервисов разворачивают на приватных IP, чтобы они были недоступны
со стороны Internet. При этом, самим клетками доступ в Internet может быть необходим.
</p>
<p>В этом случае используется NAT, транслирующий приватные IP адреса клетки на внешний IP сервера.
Функционал cbsd имеет шаблон конфигурации NAT правил для трансляции приватных сетей RFC1918.
</p>
Для этого, первым делом необходимо через команду
<br>
<pre>
    % cbsd natcfg
</pre>
выбрать соответствующий фунционал, для которого будут сгенерирована конфигурация NAT: pf, ipfw или ipnat.
<br>
<p>
<b>Внимание!</b> При конфигурировании, системных /boot/loader.conf ноды будет изменен для загрузки соответствующих модулей.
<br>
<br>
Выбор фреймворка и IP в качестве NAT alias выполняется при первом запуске <b>cbsd initenv</b>, в последствии может быть переконфигурирован через <b>cbsd initenv-tui</b>
Для того, чтобы измененный <b>natip</b> вступил в силу, необходимо запустить <b>cbsd natcfg</b> и <b>cbsd naton</b> еще раз.
</p>
<op>
В данный момент, средства cbsd по конфигурации nat ограничиваются только созданием правил для трансляции приватных сетей и
если вам необходимо получить от NAT чего-то большее, вы можете отредактировать созданный файл правил вручную в каталоге
<i><b>$workdir/etc/</b></i>
в файлах:<br>
<br>
<b>pfnat.conf</b>, если используется PF
<br>
<b>ipfw.conf</b>, если используется IPFW и
<br>
<b>ipnat.conf</b>, если используется IPNAT из пакета IPFilter
<br>
</p>
<p>Примечание:
<br>
Если <b>nodeip</b> (IP ноды) сам находится в пределах RFC1918 сетей, для этой подсети правило трансляции NAT создано не будет.
</p>
<p>Для отключения управлением nat средствами <b>cbsd</b>, воспользуйтесь запуском команды:
<pre>
     % cbsd natoff
</pre>
</p>
