<b>Commands</b>:<br>
<pre>
% cbsd ddns
</pre>

<b>Description</b>:
<br><br>
Carries out registration of the records DNS in the corresponding zones relating to a jail. For its correct work correctly adjusted DNS server and a key is necessary for zone updating.
As zones interested in updating at start and a stop of a jails can be a little, it is possible to list them in <b>rc.conf</b> of jails.

When parameters <i>ddns_zone_list</i> not empty, at performance <b>jstart</b> Ð¸ <b>jstop</b>, command
<pre>
cbsd ddns mode=add jname=xxx
</pre>
and
<pre>
cbsd ddns mode=delete jname=xxx
</pre>
are carried out automatically.
Argument <i>mode</i> means carried-out action with record - can be <i>add</i> or <i>delete</i>. 

The minimum configuration in jail rc.conf:
<pre>
ddns_zone_list="";
</pre>

should have the list of names of configurations for zones. One record for one zone. In a name there should not be points.

<pre>
ddns_key_<b>name_of_zone</b>="";
</pre>

The parameter contains a way to the file of a private key of a zone <i>name_of_zone</i>, listed in <b>ddns_zone_list</b>.

<pre>
ddns_zones_<b>name_of_zone</b>="";
</pre>

contains the list of those records which should be updated in the corresponding zone.
<br><br>
<b>Example:</b> configuration for updating of two zones: my.domain and bsdstore.ru and addition or removal
Jail IP addresses under the records test1.my.domain + test2.my.domain and relay.bsdstore.ru:
<br>
<pre>
ddns_zone_list="my_domain bsdstore";
ddns_key_my_domain="/usr/jails/etc/zonekeys/Kmy.domain.+157+52142.private";
ddns_key_bsdstore="/usr/jails/etc/zonekeys/Kbsdstore.+157+52142.private";
ddns_zones_my_domain="jail1.my.domain jail1.my.domain";
ddns_zones_bsdstore="relay.bsdstore.ru";
</pre>

Configuration for DNS with named:
<pre>
key bsdstore.ru. {algorithm "HMAC-MD5";secret "YrVW9yP6gNMA7VbcU/r2mSIwYnFj/XkCDd6QuqOHE26/ipnrPy+eXrKrUyaFhB2XWNdVLUX7QCUkfhg4zN5YiA==";};
zone "bsdstore.ru" {type master;file "/etc/namedb/dynamic/bsdstore.ru";allow-update {key bsdstore.ru; };};
</pre>

key and private key generated by:
<pre>
dnssec-keygen -b 512 -a HMAC-MD5 -v 2 -n HOST bsdstore.ru.
</pre>
